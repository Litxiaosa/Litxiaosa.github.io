<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>如何使用RedisTemplate访问Redis数据结构 | 潇洒的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Redis 数据结构简介Redis 可以存储键与5种不同数据结构类型之间的映射，这5种数据结构类型分别为String（字符串）、List（列表）、Set（集合）、Hash（散列）和 Zset（有序集合） 下面来对这5种数据结构类型作简单的介绍：">
<meta name="keywords" content="Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="如何使用RedisTemplate访问Redis数据结构">
<meta property="og:url" content="http://litxiaosa.me/2018/01/05/如何使用RedisTemplate访问Redis数据结构/index.html">
<meta property="og:site_name" content="潇洒的博客">
<meta property="og:description" content="Redis 数据结构简介Redis 可以存储键与5种不同数据结构类型之间的映射，这5种数据结构类型分别为String（字符串）、List（列表）、Set（集合）、Hash（散列）和 Zset（有序集合） 下面来对这5种数据结构类型作简单的介绍：">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-01-05T08:47:47.413Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="如何使用RedisTemplate访问Redis数据结构">
<meta name="twitter:description" content="Redis 数据结构简介Redis 可以存储键与5种不同数据结构类型之间的映射，这5种数据结构类型分别为String（字符串）、List（列表）、Set（集合）、Hash（散列）和 Zset（有序集合） 下面来对这5种数据结构类型作简单的介绍：">
    

    
        <link rel="alternate" href="/atom.xml" title="潇洒的博客" type="application/atom+xml" />
    

    
        <link rel="icon" href="/css/images/favicon.png" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    
        <script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?c519edc830f3af02ec9cc3d4c51a6583";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">潇洒的博客</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">首页</a>
                
                    <a class="main-nav-link" href="/archives/">归档</a>
                
                    <a class="main-nav-link" href="/tags/">标签</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">首页</a></td>
                
                    <td><a class="main-nav-link" href="/archives/">归档</a></td>
                
                    <td><a class="main-nav-link" href="/tags/">标签</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">潇洒</h2>
            <h3 id="title">Java码农，喜欢看书，对吉他有点小兴趣。</h3>
            <span id="location"><i class="fa fa-map-marker"></i>杭州, 浙江</span>
            <a id="follow" target="_blank" href="https://github.com/Litxiaosa">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                26
                <span>文章</span>
            </div>
            <div class="article-info-block">
                10
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/Litxiaosa" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="mailto:416082509@qq.com" target="_blank" title="envelope" class=tooltip>
                            <i class="fa fa-envelope"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://weibo.com/2517382891/profile?rightmod=1&wvr=6&mod=personinfo" target="_blank" title="weibo" class=tooltip>
                            <i class="fa fa-weibo"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-如何使用RedisTemplate访问Redis数据结构" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            如何使用RedisTemplate访问Redis数据结构
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/01/05/如何使用RedisTemplate访问Redis数据结构/">
            <time datetime="2018-01-05T02:56:31.000Z" itemprop="datePublished">2018-01-05</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Redis/">Redis</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="Redis-数据结构简介"><a href="#Redis-数据结构简介" class="headerlink" title="Redis 数据结构简介"></a>Redis 数据结构简介</h2><p>Redis 可以存储键与5种不同数据结构类型之间的映射，这5种数据结构类型分别为String（字符串）、List（列表）、Set（集合）、Hash（散列）和 Zset（有序集合）</p>
<p>下面来对这5种数据结构类型作简单的介绍：</p>
<a id="more"></a>
<table>
<thead>
<tr>
<th>结构类型</th>
<th style="text-align:center">结构存储的值</th>
<th style="text-align:right">结构的读写能力</th>
</tr>
</thead>
<tbody>
<tr>
<td>String</td>
<td style="text-align:center">可以是字符串、整数或者浮点数</td>
<td style="text-align:right">对整个字符串或者字符串的其中一部分执行操作；对象和浮点数执行自增(increment)或者自减(decrement)</td>
</tr>
<tr>
<td>List</td>
<td style="text-align:center">一个链表，链表上的每个节点都包含了一个字符串</td>
<td style="text-align:right">从链表的两端推入或者弹出元素；根据偏移量对链表进行修剪(trim)；读取单个或者多个元素；根据值来查找或者移除元素</td>
</tr>
<tr>
<td>Set</td>
<td style="text-align:center">包含字符串的无序收集器(unorderedcollection)，并且被包含的每个字符串都是独一无二的、各不相同</td>
<td style="text-align:right">添加、获取、移除单个元素；检查一个元素是否存在于某个集合中；计算交集、并集、差集；从集合里卖弄随机获取元素</td>
</tr>
<tr>
<td>Hash</td>
<td style="text-align:center">包含键值对的无序散列表</td>
<td style="text-align:right">添加、获取、移除单个键值对；获取所有键值对</td>
</tr>
<tr>
<td>Zset</td>
<td style="text-align:center">字符串成员(member)与浮点数分值(score)之间的有序映射，元素的排列顺序由分值的大小决定</td>
<td style="text-align:right">添加、获取、删除单个元素；根据分值范围(range)或者成员来获取元素</td>
</tr>
</tbody>
</table>
<p>Redis 5种数据结构的概念大致介绍到这边，下面将结合Spring封装的RedisTemplate来对这5种数据结构的运用进行演示</p>
<h2 id="RedisTemplate介绍"><a href="#RedisTemplate介绍" class="headerlink" title="RedisTemplate介绍"></a>RedisTemplate介绍</h2><p>spring 封装了 <code>RedisTemplate</code> 对象来进行对redis的各种操作，它支持所有的 redis 原生的 api</p>
<h3 id="RedisTemplate在spring代码中的结构如下："><a href="#RedisTemplate在spring代码中的结构如下：" class="headerlink" title="RedisTemplate在spring代码中的结构如下："></a>RedisTemplate在spring代码中的结构如下：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.data.redis.core</span><br><span class="line">Class RedisTemplate&lt;K,V&gt;</span><br><span class="line">java.lang.Object</span><br><span class="line">    org.springframework.data.redis.core.RedisAccessor</span><br><span class="line">        org.springframework.data.redis.core.RedisTemplate&lt;K,V&gt;</span><br></pre></td></tr></table></figure>
<p><strong>Type Parameters:</strong></p>
<blockquote>
<p><strong>K:</strong>模板中的Redis key的类型（通常为String）如：RedisTemplate<string, object=""><br>注意：如果没特殊情况，切勿定义成RedisTemplate<object, object="">，否则根据里氏替换原则，使用的时候会造成类型错误 。</object,></string,></p>
<p><strong>V:</strong> 模板中的Redis value的类型</p>
</blockquote>
<h3 id="RedisTemplate中定义了对5种数据结构操作"><a href="#RedisTemplate中定义了对5种数据结构操作" class="headerlink" title="RedisTemplate中定义了对5种数据结构操作"></a>RedisTemplate中定义了对5种数据结构操作</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redisTemplate.opsForValue<span class="comment">()</span>;<span class="comment">//操作字符串</span></span><br><span class="line">redisTemplate.opsForHash<span class="comment">()</span>;<span class="comment">//操作hash</span></span><br><span class="line">redisTemplate.opsForList<span class="comment">()</span>;<span class="comment">//操作list</span></span><br><span class="line">redisTemplate.opsForSet<span class="comment">()</span>;<span class="comment">//操作set</span></span><br><span class="line">redisTemplate.opsForZSet<span class="comment">()</span>;<span class="comment">//操作有序set</span></span><br></pre></td></tr></table></figure>
<h2 id="StringRedisTemplate与RedisTemplate"><a href="#StringRedisTemplate与RedisTemplate" class="headerlink" title="StringRedisTemplate与RedisTemplate"></a>StringRedisTemplate与RedisTemplate</h2><ul>
<li>两者的关系是StringRedisTemplate继承RedisTemplate。</li>
</ul>
<ul>
<li><p>两者的数据是不共通的；也就是说StringRedisTemplate只能管理StringRedisTemplate里面的数据，RedisTemplate只能管理RedisTemplate中的数据</p>
</li>
<li><p>SDR默认采用的序列化策略有两种，一种是String的序列化策略，一种是JDK的序列化策略。</p>
<p>  StringRedisTemplate默认采用的是String的序列化策略，保存的key和value都是采用此策略序列化保存的。</p>
<p>  RedisTemplate默认采用的是JDK的序列化策略，保存的key和value都是采用此策略序列化保存的。</p>
</li>
</ul>
<h3 id="RedisTemplate配置如下："><a href="#RedisTemplate配置如下：" class="headerlink" title="RedisTemplate配置如下："></a>RedisTemplate配置如下：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Object&gt;(Object.class);</span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;String, Object&gt;();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        template.setKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Redis的String数据结构-（推荐使用StringRedisTemplate）"><a href="#Redis的String数据结构-（推荐使用StringRedisTemplate）" class="headerlink" title="Redis的String数据结构 （推荐使用StringRedisTemplate）"></a>Redis的String数据结构 （推荐使用StringRedisTemplate）</h2><p><strong>注意：如果使用RedisTemplate需要更改序列化方式</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RedisSerializer&lt;String&gt; stringSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">        template.setKeySerializer(stringSerializer );</span><br><span class="line">        template.setValueSerializer(stringSerializer );</span><br><span class="line">        template.setHashKeySerializer(stringSerializer );</span><br><span class="line">        template.setHashValueSerializer(stringSerializer );</span><br></pre></td></tr></table></figure>
<h4 id="ValueOperations可以对String数据结构进行操作"><a href="#ValueOperations可以对String数据结构进行操作" class="headerlink" title="ValueOperations可以对String数据结构进行操作"></a><strong>ValueOperations可以对String数据结构进行操作</strong></h4><ul>
<li><p><strong>set void set(K key, V value);</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：redisTemplate.opsForValue().set(<span class="string">"name"</span>,<span class="string">"tom"</span>);</span><br><span class="line">结果：redisTemplate.opsForValue().get(<span class="string">"name"</span>)  输出结果为tom</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>set void set(K key, V value, long timeout, TimeUnit unit);</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：redisTemplate.opsForValue().set(<span class="string">"name"</span>,<span class="string">"tom"</span>,<span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">结果：redisTemplate.opsForValue().get(<span class="string">"name"</span>)由于设置的是<span class="number">10</span>秒失效，十秒之内查询有结果，十秒之后返回为<span class="keyword">null</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>set void set(K key, V value, long offset);</strong></p>
<p>该方法是用 value 参数覆写(overwrite)给定 key 所储存的字符串值，从偏移量 offset 开始</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(<span class="string">"key"</span>,<span class="string">"hello world"</span>);</span><br><span class="line">       template.opsForValue().set(<span class="string">"key"</span>,<span class="string">"redis"</span>, <span class="number">6</span>);</span><br><span class="line">        System.out.println(<span class="string">"***************"</span>+template.opsForValue().get(<span class="string">"key"</span>));</span><br><span class="line">结果：***************hello redis</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>setIfAbsent Boolean setIfAbsent(K key, V value);</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用:   System.out.println(template.opsForValue().setIfAbsent(<span class="string">"multi1"</span>,<span class="string">"multi1"</span>));<span class="comment">// false  multi1之前已经存在</span></span><br><span class="line">         System.out.println(template.opsForValue().setIfAbsent(<span class="string">"multi111"</span>,<span class="string">"multi111"</span>)); <span class="comment">//true  multi111之前不存在</span></span><br><span class="line">结果：<span class="keyword">false</span></span><br><span class="line">       <span class="keyword">true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>multiSet void multiSet(Map&lt;? extends K, ? extends V&gt; m);</strong></p>
<p>为多个键分别设置它们的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用：Map&lt;String,String&gt; maps = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">      maps.put(<span class="string">"multi1"</span>,<span class="string">"multi1"</span>);</span><br><span class="line">      maps.put(<span class="string">"multi2"</span>,<span class="string">"multi2"</span>);</span><br><span class="line">      maps.put(<span class="string">"multi3"</span>,<span class="string">"multi3"</span>);</span><br><span class="line">      template.opsForValue().multiSet(maps);</span><br><span class="line">      List&lt;String&gt; keys = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">      keys.add(<span class="string">"multi1"</span>);</span><br><span class="line">      keys.add(<span class="string">"multi2"</span>);</span><br><span class="line">      keys.add(<span class="string">"multi3"</span>);</span><br><span class="line">      System.out.println(template.opsForValue().multiGet(keys));</span><br><span class="line"> 结果：[multi1, multi2, multi3]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>multiSetIfAbsent Boolean multiSetIfAbsent(Map&lt;? extends K, ? extends V&gt; m);</strong></p>
<p>为多个键分别设置它们的值，如果存在则返回false，不存在返回true</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">使用：Map&lt;String,String&gt; maps = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">      maps.put(<span class="string">"multi11"</span>,<span class="string">"multi11"</span>);</span><br><span class="line">      maps.put(<span class="string">"multi22"</span>,<span class="string">"multi22"</span>);</span><br><span class="line">      maps.put(<span class="string">"multi33"</span>,<span class="string">"multi33"</span>);</span><br><span class="line">      Map&lt;String,String&gt; maps2 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">      maps2.put(<span class="string">"multi1"</span>,<span class="string">"multi1"</span>);</span><br><span class="line">      maps2.put(<span class="string">"multi2"</span>,<span class="string">"multi2"</span>);</span><br><span class="line">      maps2.put(<span class="string">"multi3"</span>,<span class="string">"multi3"</span>);</span><br><span class="line">      System.out.println(template.opsForValue().multiSetIfAbsent(maps));</span><br><span class="line">      System.out.println(template.opsForValue().multiSetIfAbsent(maps2));</span><br><span class="line">结果：<span class="keyword">true</span></span><br><span class="line">       <span class="keyword">false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>get V get(Object key);</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(<span class="string">"key"</span>,<span class="string">"hello world"</span>);</span><br><span class="line">       System.out.println(<span class="string">"***************"</span>+template.opsForValue().get(<span class="string">"key"</span>));</span><br><span class="line">结果：***************hello world</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>getAndSet V getAndSet(K key, V value);</strong></p>
<p>设置键的字符串值并返回其旧值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(<span class="string">"getSetTest"</span>,<span class="string">"test"</span>);</span><br><span class="line">       System.out.println(template.opsForValue().getAndSet(<span class="string">"getSetTest"</span>,<span class="string">"test2"</span>));</span><br><span class="line">结果：test</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>multiGet List<v> multiGet(Collection<k> keys);</k></v></strong></p>
<p>为多个键分别取出它们的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用：Map&lt;String,String&gt; maps = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">      maps.put(<span class="string">"multi1"</span>,<span class="string">"multi1"</span>);</span><br><span class="line">      maps.put(<span class="string">"multi2"</span>,<span class="string">"multi2"</span>);</span><br><span class="line">      maps.put(<span class="string">"multi3"</span>,<span class="string">"multi3"</span>);</span><br><span class="line">      template.opsForValue().multiSet(maps);</span><br><span class="line">      List&lt;String&gt; keys = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">      keys.add(<span class="string">"multi1"</span>);</span><br><span class="line">      keys.add(<span class="string">"multi2"</span>);</span><br><span class="line">      keys.add(<span class="string">"multi3"</span>);</span><br><span class="line">      System.out.println(template.opsForValue().multiGet(keys));</span><br><span class="line">结果：[multi1, multi2, multi3]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>increment Long increment(K key, long delta);</strong></p>
<p>支持整数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().increment(<span class="string">"increlong"</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">"***************"</span>+template.opsForValue().get(<span class="string">"increlong"</span>));</span><br><span class="line">结果：***************<span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>increment Double increment(K key, double delta);</strong></p>
<p>支持浮点数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().increment(<span class="string">"increlong"</span>,<span class="number">1.2</span>);</span><br><span class="line">        System.out.println(<span class="string">"***************"</span>+template.opsForValue().get(<span class="string">"increlong"</span>));</span><br><span class="line">结果：***************<span class="number">2.2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>append Integer append(K key, String value);</strong></p>
<p>如果key已经存在并且是一个字符串，则该命令将该值追加到字符串的末尾。如果键不存在，则它被创建并设置为空字符串，因此APPEND在这种特殊情况下将类似于SET。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().append(<span class="string">"appendTest"</span>,<span class="string">"Hello"</span>);</span><br><span class="line">       System.out.println(template.opsForValue().get(<span class="string">"appendTest"</span>));</span><br><span class="line">       template.opsForValue().append(<span class="string">"appendTest"</span>,<span class="string">"world"</span>);</span><br><span class="line">       System.out.println(template.opsForValue().get(<span class="string">"appendTest"</span>));</span><br><span class="line">结果：Hello</span><br><span class="line">        Helloworld</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>get String get(K key, long start, long end);</strong></p>
<p>截取key所对应的value字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：appendTest对应的value为Helloworld</span><br><span class="line">        System.out.println(<span class="string">"*********"</span>+template.opsForValue().get(<span class="string">"appendTest"</span>,<span class="number">0</span>,<span class="number">5</span>));</span><br><span class="line">结果：*********Hellow</span><br><span class="line">使用：System.out.println(<span class="string">"*********"</span>+template.opsForValue().get(<span class="string">"appendTest"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果：*********Helloworld</span><br><span class="line">使用： System.out.println(<span class="string">"*********"</span>+template.opsForValue().get(<span class="string">"appendTest"</span>,-<span class="number">3</span>,-<span class="number">1</span>));</span><br><span class="line">结果：*********rld</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>size Long size(K key);</strong></p>
<p>返回key所对应的value值得长度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(<span class="string">"key"</span>,<span class="string">"hello world"</span>);</span><br><span class="line">        System.out.println(<span class="string">"***************"</span>+template.opsForValue().size(<span class="string">"key"</span>));</span><br><span class="line">结果：***************<span class="number">11</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>setBit Boolean setBit(K key, long offset, boolean value);</strong></p>
<p>对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)<br>key键对应的值value对应的ascii码,在offset的位置(从左向右数)变为value</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForValue().set(<span class="string">"bitTest"</span>,<span class="string">"a"</span>);</span><br><span class="line">      <span class="comment">// 'a' 的ASCII码是 97。转换为二进制是：01100001</span></span><br><span class="line">      <span class="comment">// 'b' 的ASCII码是 98  转换为二进制是：01100010</span></span><br><span class="line">      <span class="comment">// 'c' 的ASCII码是 99  转换为二进制是：01100011</span></span><br><span class="line">      <span class="comment">//因为二进制只有0和1，在setbit中true为1，false为0，因此我 要变为'b'的话第六位设置为1，第七位设置为0</span></span><br><span class="line">      template.opsForValue().setBit(<span class="string">"bitTest"</span>,<span class="number">6</span>, <span class="keyword">true</span>);</span><br><span class="line">      template.opsForValue().setBit(<span class="string">"bitTest"</span>,<span class="number">7</span>, <span class="keyword">false</span>);</span><br><span class="line">       System.out.println(template.opsForValue().get(<span class="string">"bitTest"</span>));</span><br><span class="line"> 结果：b</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>getBit Boolean getBit(K key, long offset);</strong></p>
<p>获取键对应值的ascii码的在offset处位值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForValue().getBit(<span class="string">"bitTest"</span>,<span class="number">7</span>));</span><br><span class="line">结果：<span class="keyword">false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Redis的List数据结构"><a href="#Redis的List数据结构" class="headerlink" title="Redis的List数据结构"></a>Redis的List数据结构</h2><p><strong>这边我们把RedisTemplate序列化方式改回之前的</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Object&gt;(Object.class);</span><br><span class="line">       ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">       om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">       om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">       jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">       RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;String, Object&gt;();</span><br><span class="line">       template.setKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">       template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">       template.setHashKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">       template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br></pre></td></tr></table></figure>
<p>Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素导列表的头部（左边）或者尾部（右边）</p>
<p><strong>ListOperations专门操作list列表:</strong></p>
<ul>
<li><p><strong>List<v> range(K key, long start, long end);</v></strong></p>
<p>返回存储在键中的列表的指定元素。偏移开始和停止是基于零的索引，其中0是列表的第一个元素（列表的头部），1是下一个元素</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[c#, c++, python, java, c#, c#]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>void trim(K key, long start, long end);</strong></p>
<p>修剪现有列表，使其只包含指定的指定范围的元素，起始和停止都是基于0的索引</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">        template.opsForList().trim(<span class="string">"list"</span>,<span class="number">1</span>,-<span class="number">1</span>);<span class="comment">//裁剪第一个元素</span></span><br><span class="line">        System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[c#, c++, python, java, c#, c#]</span><br><span class="line">       [c++, python, java, c#, c#]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long size(K key);</strong></p>
<p>返回存储在键中的列表的长度。如果键不存在，则将其解释为空列表，并返回0。当key存储的值不是列表时返回错误。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().size(<span class="string">"list"</span>));</span><br><span class="line">结果:<span class="number">6</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long leftPush(K key, V value);</strong></p>
<p>将所有指定的值插入存储在键的列表的头部。如果键不存在，则在执行推送操作之前将其创建为空列表。（从左边插入）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForList().leftPush(<span class="string">"list"</span>,<span class="string">"java"</span>);</span><br><span class="line">       template.opsForList().leftPush(<span class="string">"list"</span>,<span class="string">"python"</span>);</span><br><span class="line">       template.opsForList().leftPush(<span class="string">"list"</span>,<span class="string">"c++"</span>);</span><br><span class="line">结果:返回的结果为推送操作后的列表的长度</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long leftPushAll(K key, V… values);</strong></p>
<p>批量把一个数组插入到列表中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用：String[] stringarrays = <span class="keyword">new</span> String[]&#123;<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>&#125;;</span><br><span class="line">       template.opsForList().leftPushAll(<span class="string">"listarray"</span>,stringarrays);</span><br><span class="line">       System.out.println(template.opsForList().range(<span class="string">"listarray"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long leftPushAll(K key, Collection<v> values);</v></strong></p>
<p>批量把一个集合插入到列表中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：List&lt;Object&gt; strings = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line">      strings.add(<span class="string">"1"</span>);</span><br><span class="line">      strings.add(<span class="string">"2"</span>);</span><br><span class="line">      strings.add(<span class="string">"3"</span>);</span><br><span class="line">      template.opsForList().leftPushAll(<span class="string">"listcollection4"</span>, strings);</span><br><span class="line">      System.out.println(template.opsForList().range(<span class="string">"listcollection4"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long leftPushIfPresent(K key, V value);</strong></p>
<p>只有存在key对应的列表才能将这个value值插入到key所对应的列表中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> 使用： System.out.println(template.opsForList().leftPushIfPresent(<span class="string">"leftPushIfPresent"</span>,<span class="string">"aa"</span>));</span><br><span class="line">        System.out.println(template.opsForList().leftPushIfPresent(<span class="string">"leftPushIfPresent"</span>,<span class="string">"bb"</span>));</span><br><span class="line">==========分割线===========</span><br><span class="line">System.out.println(template.opsForList().leftPush(<span class="string">"leftPushIfPresent"</span>,<span class="string">"aa"</span>));</span><br><span class="line">        System.out.println(template.opsForList().leftPushIfPresent(<span class="string">"leftPushIfPresent"</span>,<span class="string">"bb"</span>));</span><br><span class="line">结果:</span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> ==========分割线===========</span><br><span class="line"> <span class="number">1</span></span><br><span class="line"> <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long leftPush(K key, V pivot, V value);</strong></p>
<p>把value值放到key对应列表中pivot值的左面，如果pivot值存在的话</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForList().leftPush(<span class="string">"list"</span>,<span class="string">"java"</span>,<span class="string">"oc"</span>);</span><br><span class="line">       System.out.print(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果：[c++, python, oc, java, c#, c#]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long rightPush(K key, V value);</strong></p>
<p>将所有指定的值插入存储在键的列表的头部。如果键不存在，则在执行推送操作之前将其创建为空列表。（从右边插入）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：template.opsForList().rightPush(<span class="string">"listRight"</span>,<span class="string">"java"</span>);</span><br><span class="line">       template.opsForList().rightPush(<span class="string">"listRight"</span>,<span class="string">"python"</span>);</span><br><span class="line">       template.opsForList().rightPush(<span class="string">"listRight"</span>,<span class="string">"c++"</span>);</span><br><span class="line">结果:</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long rightPushAll(K key, V… values);</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用：String[] stringarrays = <span class="keyword">new</span> String[]&#123;<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>&#125;;</span><br><span class="line">       template.opsForList().rightPushAll(<span class="string">"listarrayright"</span>,stringarrays);</span><br><span class="line">       System.out.println(template.opsForList().range(<span class="string">"listarrayright"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long rightPushAll(K key, Collection<v> values);</v></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：List&lt;Object&gt; strings = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line">      strings.add(<span class="string">"1"</span>);</span><br><span class="line">      strings.add(<span class="string">"2"</span>);</span><br><span class="line">      strings.add(<span class="string">"3"</span>);</span><br><span class="line">      template.opsForList().rightPushAll(<span class="string">"listcollectionright"</span>, strings);</span><br><span class="line">      System.out.println(template.opsForList().range(<span class="string">"listcollectionright"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long rightPushIfPresent(K key, V value);</strong></p>
<p>只有存在key对应的列表才能将这个value值插入到key所对应的列表中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().rightPushIfPresent(<span class="string">"rightPushIfPresent"</span>,<span class="string">"aa"</span>));</span><br><span class="line">      System.out.println(template.opsForList().rightPushIfPresent(<span class="string">"rightPushIfPresent"</span>,<span class="string">"bb"</span>));</span><br><span class="line">      System.out.println(<span class="string">"==========分割线==========="</span>);</span><br><span class="line">      System.out.println(template.opsForList().rightPush(<span class="string">"rightPushIfPresent"</span>,<span class="string">"aa"</span>));</span><br><span class="line">      System.out.println(template.opsForList().rightPushIfPresent(<span class="string">"rightPushIfPresent"</span>,<span class="string">"bb"</span>));</span><br><span class="line">结果:<span class="number">0</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line">==========分割线===========</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long rightPush(K key, V pivot, V value);</strong></p>
<p>把value值放到key对应列表中pivot值的右面，如果pivot值存在的话</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(<span class="string">"listRight"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">      template.opsForList().rightPush(<span class="string">"listRight"</span>,<span class="string">"python"</span>,<span class="string">"oc"</span>);</span><br><span class="line">      System.out.println(template.opsForList().range(<span class="string">"listRight"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[java, python, c++]</span><br><span class="line">[java, python, oc, c++]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>void set(K key, long index, V value);</strong></p>
<p>在列表中index的位置设置value值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(<span class="string">"listRight"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">       template.opsForList().set(<span class="string">"listRight"</span>,<span class="number">1</span>,<span class="string">"setValue"</span>);</span><br><span class="line">       System.out.println(template.opsForList().range(<span class="string">"listRight"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[java, python, oc, c++]</span><br><span class="line">[java, setValue, oc, c++]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Long remove(K key, long count, Object value);</strong></p>
<p>从存储在键中的列表中删除等于值的元素的第一个计数事件。<br>计数参数以下列方式影响操作：</p>
<blockquote>
<p>count&gt; 0：删除等于从头到尾移动的值的元素。</p>
<p>count &lt;0：删除等于从尾到头移动的值的元素。</p>
<p>count = 0：删除等于value的所有元素。 </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">   使用：System.out.println(template.opsForList().range(<span class="string">"listRight"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">         template.opsForList().remove(<span class="string">"listRight"</span>,<span class="number">1</span>,<span class="string">"setValue"</span>);<span class="comment">//将删除列表中存储的列表中第一次次出现的“setValue”。</span></span><br><span class="line">         System.out.println(template.opsForList().range(<span class="string">"listRight"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">  结果:[java, setValue, oc, c++]</span><br><span class="line">  [java, oc, c++]</span><br><span class="line">  ```  </span><br><span class="line"></span><br><span class="line">- **<span class="function">V <span class="title">index</span><span class="params">(K key, <span class="keyword">long</span> index)</span></span>;**</span><br><span class="line"></span><br><span class="line">  根据下表获取列表中的值，下标是从<span class="number">0</span>开始的</span><br><span class="line"> </span><br><span class="line">  ```java</span><br><span class="line">  使用：System.out.println(template.opsForList().range(<span class="string">"listRight"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">          System.out.println(template.opsForList().index(<span class="string">"listRight"</span>,<span class="number">2</span>));</span><br><span class="line">  结果:[java, oc, c++]</span><br><span class="line">  c++</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>V leftPop(K key);</strong></p>
<p>弹出最左边的元素，弹出之后该值在列表中将不复存在</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">       System.out.println(template.opsForList().leftPop(<span class="string">"list"</span>));</span><br><span class="line">       System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:</span><br><span class="line">[c++, python, oc, java, c#, c#]</span><br><span class="line"> c++</span><br><span class="line">[python, oc, java, c#, c#]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>V leftPop(K key, long timeout, TimeUnit unit);</strong></p>
<p>移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：用法与 leftPop(K key)<span class="comment">;一样</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>V rightPop(K key);</strong></p>
<p>弹出最右边的元素，弹出之后该值在列表中将不复存在</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用： System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">        System.out.println(template.opsForList().rightPop(<span class="string">"list"</span>));</span><br><span class="line">        System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果:[python, oc, java, c#, c#]</span><br><span class="line">       c#</span><br><span class="line">       [python, oc, java, c#]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>V rightPop(K key, long timeout, TimeUnit unit)</strong></p>
<p>移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：用法与 rightPop(K key)<span class="comment">;一样</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>V rightPopAndLeftPush(K sourceKey, K destinationKey);</strong></p>
<p>用于移除列表的最后一个元素，并将该元素添加到另一个列表并返回。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));		 template.opsForList().rightPopAndLeftPush(<span class="string">"list"</span>,<span class="string">"rightPopAndLeftPush"</span>);</span><br><span class="line">   	 System.out.println(template.opsForList().range(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">   	 System.out.println(template.opsForList().range(<span class="string">"rightPopAndLeftPush"</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line">结果: [oc, java,c#]</span><br><span class="line">       [oc, java]</span><br><span class="line">       [c#]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>V rightPopAndLeftPush(K sourceKey, K destinationKey, long timeout, TimeUnit unit);</strong> </p>
<p>用于移除列表的最后一个元素，并将该元素添加到另一个列表并返回，如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用：用法与rightPopAndLeftPush(<span class="keyword">K</span> sourceKey, <span class="keyword">K</span> destinationKey)一样</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Redis的Hash数据机构"><a href="#Redis的Hash数据机构" class="headerlink" title="Redis的Hash数据机构"></a>Redis的Hash数据机构</h2><p> Redis的散列可以让用户将多个键值对存储到一个Redis键里面。</p>
<p> public interface HashOperations<h,hk,hv></h,hk,hv></p>
<p> HashOperations提供一系列方法操作hash：</p>
 <figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">初始数据:</span><br><span class="line"><span class="regexp">//</span>template.opsForHash().put(<span class="string">"redisHash"</span>,<span class="string">"name"</span>,<span class="string">"tom"</span>);</span><br><span class="line"><span class="regexp">//</span>template.opsForHash().put(<span class="string">"redisHash"</span>,<span class="string">"age"</span>,<span class="number">26</span>);</span><br><span class="line"><span class="regexp">//</span>template.opsForHash().put(<span class="string">"redisHash"</span>,<span class="string">"class"</span>,<span class="string">"6"</span>);</span><br><span class="line"><span class="regexp">//</span>Map&lt;String,Object&gt; testMap = new HashMap();</span><br><span class="line">       <span class="regexp">//</span>testMap.put(<span class="string">"name"</span>,<span class="string">"jack"</span>);</span><br><span class="line">       <span class="regexp">//</span>testMap.put(<span class="string">"age"</span>,<span class="number">27</span>);</span><br><span class="line">       <span class="regexp">//</span>testMap.put(<span class="string">"class"</span>,<span class="string">"1"</span>);</span><br><span class="line">       <span class="regexp">//</span>template.opsForHash().putAll(<span class="string">"redisHash1"</span>,testMap);</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>Long delete(H key, Object… hashKeys);</strong> </p>
<p>删除给定的哈希hashKeys</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用：System.<span class="keyword">out</span>.println(<span class="keyword">template</span>.opsForHash().<span class="keyword">delete</span>(<span class="string">"redisHash"</span>,<span class="string">"name"</span>));</span><br><span class="line">      System.<span class="keyword">out</span>.println(<span class="keyword">template</span>.opsForHash().entries(<span class="string">"redisHash"</span>));</span><br><span class="line">结果：<span class="number">1</span></span><br><span class="line">&#123;<span class="keyword">class</span>=<span class="number">6</span>, age=<span class="number">28.1</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>Boolean hasKey(H key, Object hashKey);</strong></p>
<p>确定哈希hashKey是否存在</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用：System.<span class="keyword">out</span>.println(<span class="keyword">template</span>.opsForHash().hasKey(<span class="string">"redisHash"</span>,<span class="string">"age"</span>));</span><br><span class="line">       System.<span class="keyword">out</span>.println(<span class="keyword">template</span>.opsForHash().hasKey(<span class="string">"redisHash"</span>,<span class="string">"ttt"</span>));</span><br><span class="line">结果：<span class="literal">true</span></span><br><span class="line">       <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>HV get(H key, Object hashKey);</strong></p>
<p>从键中的哈希获取给定hashKey的值</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用：System.out.<span class="built_in">println</span>(<span class="keyword">template</span>.opsForHash().<span class="built_in">get</span>(<span class="string">"redisHash"</span>,<span class="string">"age"</span>));</span><br><span class="line">结果：<span class="number">26</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>List<hv> multiGet(H key, Collection<hk> hashKeys);</hk></hv></strong></p>
<p>从哈希中获取给定hashKey的值</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用：List&lt;<span class="keyword">Object</span>&gt; kes = <span class="keyword">new</span> ArrayList&lt;<span class="keyword">Object</span>&gt;();</span><br><span class="line">       kes.<span class="built_in">add</span>(<span class="string">"name"</span>);</span><br><span class="line">       kes.<span class="built_in">add</span>(<span class="string">"age"</span>);</span><br><span class="line">       System.out.<span class="built_in">println</span>(template.opsForHash().multiGet(<span class="string">"redisHash"</span>,kes));</span><br><span class="line">结果：[jack, <span class="number">28.1</span>]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>Long increment(H key, HK hashKey, long delta);</strong></p>
<p>通过给定的delta增加散列hashKey的值（整型）</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  使用：System.out.<span class="built_in">println</span>(<span class="keyword">template</span>.opsForHash().<span class="built_in">get</span>(<span class="string">"redisHash"</span>,<span class="string">"age"</span>));</span><br><span class="line">         System.out.<span class="built_in">println</span>(<span class="keyword">template</span>.opsForHash().increment(<span class="string">"redisHash"</span>,<span class="string">"age"</span>,<span class="number">1</span>));</span><br><span class="line">  结果：<span class="number">26</span></span><br><span class="line">         <span class="number">27</span></span><br><span class="line">  ``` </span><br><span class="line">  </span><br><span class="line">- **Double increment(H key, HK hashKey, <span class="keyword">double</span> delta);**</span><br><span class="line">true</span><br><span class="line">  通过给定的delta增加散列hashKey的值（浮点数）</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForHash().get(“redisHash”,”age”));</p>
<pre><code>System.out.println(template.opsForHash().increment(&quot;redisHash&quot;,&quot;age&quot;,1.1));
</code></pre><p>结果：27</p>
<pre><code>28.1
</code></pre><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;HK&gt; <span class="built_in">keys</span>(H <span class="built_in">key</span>);**</span><br><span class="line"></span><br><span class="line">  获取<span class="built_in">key</span>所对应的散列表的<span class="built_in">key</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForHash().keys(“redisHash1”));</p>
<pre><code>//redisHash1所对应的散列表为{class=1, name=jack, age=27}
</code></pre><p>结果：[name, class, age]</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long <span class="built_in">size</span>(H <span class="built_in">key</span>);**  </span><br><span class="line"></span><br><span class="line">  获取<span class="built_in">key</span>所对应的散列表的大小个数</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForHash().size(“redisHash1”));</p>
<pre><code>//redisHash1所对应的散列表为{class=1, name=jack, age=27}
</code></pre><p>结果：3</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="function"><span class="keyword">void</span> <span class="title">putAll</span><span class="params">(H key, Map&lt;? <span class="keyword">extends</span> HK, ? <span class="keyword">extends</span> HV&gt; m)</span></span>;** </span><br><span class="line"> 	</span><br><span class="line">  使用m中提供的多个散列字段设置到key对应的散列表中</span><br></pre></td></tr></table></figure>
<p>使用：Map<string,object> testMap = new HashMap();</string,object></p>
<pre><code>    testMap.put(&quot;name&quot;,&quot;jack&quot;);
    testMap.put(&quot;age&quot;,27);
    testMap.put(&quot;class&quot;,&quot;1&quot;);
template.opsForHash().putAll(&quot;redisHash1&quot;,testMap);
System.out.println(template.opsForHash().entries(&quot;redisHash1&quot;));
</code></pre><p>结果：{class=1, name=jack, age=27}</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- **<span class="function"><span class="keyword">void</span> <span class="title">put</span>(<span class="params">H key, HK hashKey, HV <span class="keyword">value</span></span>)</span>;**</span><br><span class="line"></span><br><span class="line">  设置散列hashKey的值</span><br></pre></td></tr></table></figure>
<p>使用：template.opsForHash().put(“redisHash”,”name”,”tom”);</p>
<pre><code>template.opsForHash().put(&quot;redisHash&quot;,&quot;age&quot;,26);
template.opsForHash().put(&quot;redisHash&quot;,&quot;class&quot;,&quot;6&quot;);
   System.out.println(template.opsForHash().entries(&quot;redisHash&quot;));
</code></pre><p>结果：{age=26, class=6, name=tom}</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  </span></span><br><span class="line"><span class="bullet">- </span>*<span class="strong">*Boolean putIfAbsent(H key, HK hashKey, HV value);*</span><span class="strong">*</span></span><br><span class="line"><span class="strong">	</span></span><br><span class="line"><span class="strong">  仅当hashKey不存在时才设置散列hashKey的值</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForHash().putIfAbsent(“redisHash”,”age”,30));</p>
<pre><code>System.out.println(template.opsForHash().putIfAbsent(&quot;redisHash&quot;,&quot;kkk&quot;,&quot;kkk&quot;));
</code></pre><p>结果：false</p>
<pre><code>true
</code></pre><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  </span></span><br><span class="line"><span class="bullet">- </span>*<span class="strong">*List&lt;HV&gt; values(H key);*</span>* </span><br><span class="line"></span><br><span class="line"><span class="code">  获取整个哈希存储的值根据密钥</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForHash().values(“redisHash”));<br>结果：[tom, 26, 6]</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>*<span class="strong">*Map&lt;HK, HV&gt; entries(H key);*</span><span class="strong">*</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">  获取整个哈希存储根据密钥</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForHash().entries(“redisHash”));<br>结果：{age=26, class=6, name=tom}  </p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> **Cursor&lt;Map.Entry&lt;HK, HV<span class="meta">&gt;&gt; </span>scan(H key, ScanOptions options);**  </span></span><br><span class="line"><span class="ruby">  </span></span><br><span class="line"><span class="ruby">  使用Cursor在key的hash中迭代，相当于迭代器。</span></span><br></pre></td></tr></table></figure>
<p>使用：Cursor<map.entry<object, object="">&gt; curosr =     template.opsForHash().scan(“redisHash”, ScanOptions.ScanOptions.NONE);</map.entry<object,></p>
<pre><code> while(curosr.hasNext()){
    Map.Entry&lt;Object, Object&gt; entry = curosr.next();
    System.out.println(entry.getKey()+&quot;:&quot;+entry.getValue());
}
</code></pre><p>结果：age:28.1</p>
<pre><code>class:6
kkk:kkk
</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="comment">## Redis的Set数据结构</span></span><br><span class="line"></span><br><span class="line">Redis的Set是string类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据 </span><br><span class="line">  </span><br><span class="line">Redis 中 集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。</span><br><span class="line">public<span class="built_in"> interface </span>SetOperations&lt;K,V&gt;</span><br><span class="line">SetOperations提供了对无序集合的一系列操作：</span><br><span class="line">  </span><br><span class="line">- **Long <span class="builtin-name">add</span>(K key, V<span class="built_in">..</span>. values);**</span><br><span class="line"></span><br><span class="line">  无序集合中添加元素，返回添加个数</span><br><span class="line">也可以直接在add里面添加多个值 如：template.opsForSet().<span class="builtin-name">add</span>(<span class="string">"setTest"</span>,<span class="string">"aaa"</span>,<span class="string">"bbb"</span>)</span><br></pre></td></tr></table></figure>
<p>使用：String[] strarrays = new String[]{“strarr1”,”sgtarr2”};</p>
<pre><code>System.out.println(template.opsForSet().add(&quot;setTest&quot;, strarrays));
</code></pre><p>结果：2</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long <span class="built_in">remove</span>(K <span class="built_in">key</span>, Object... <span class="built_in">values</span>);**</span><br><span class="line">  </span><br><span class="line">  移除集合中一个或多个成员</span><br></pre></td></tr></table></figure>
<p>使用：String[] strarrays = new String[]{“strarr1”,”sgtarr2”};</p>
<pre><code>System.out.println(template.opsForSet().remove(&quot;setTest&quot;,strarrays));
</code></pre><p>结果：2</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  </span></span><br><span class="line"><span class="bullet">- </span>*<span class="strong">*V pop(K key);*</span>* </span><br><span class="line"><span class="code"> 	</span></span><br><span class="line"><span class="code">  移除并返回集合中的一个随机元素</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForSet().pop(“setTest”));</p>
<pre><code>System.out.println(template.opsForSet().members(&quot;setTest&quot;));
</code></pre><p>结果：bbb</p>
<pre><code>[aaa, ccc]
</code></pre><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="keyword">Boolean </span><span class="keyword">move(K </span>key, V value, K destKey)<span class="comment">;**</span></span><br><span class="line"></span><br><span class="line">  将 member 元素从 source 集合移动到 destination 集合</span><br></pre></td></tr></table></figure>
<p>使用：template.opsForSet().move(“setTest”,”aaa”,”setTest2”);</p>
<pre><code>System.out.println(template.opsForSet().members(&quot;setTest&quot;));
System.out.println(template.opsForSet().members(&quot;setTest2&quot;));
</code></pre><p>结果：[ccc]</p>
<pre><code>[aaa]
</code></pre><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  </span></span><br><span class="line"><span class="bullet">- </span>*<span class="strong">*Long size(K key);*</span><span class="strong">*</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">  无序集合的大小长度</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForSet().size(“setTest”));<br>结果：1</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="built_in">Boolean</span> isMember(K <span class="keyword">key</span>, <span class="built_in">Object</span> o);** </span><br><span class="line">  </span><br><span class="line">  判断 member 元素是否是集合 <span class="keyword">key</span> 的成员</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForSet().isMember(“setTest”,”ccc”));</p>
<pre><code>System.out.println(template.opsForSet().isMember(&quot;setTest&quot;,&quot;asd&quot;));
</code></pre><p>结果：true</p>
<pre><code>false
</code></pre><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">- **<span class="keyword">Set</span>&lt;V&gt; intersect(K <span class="comment">key, K otherKey)</span>;**</span><br><span class="line">  </span><br><span class="line">  key对应的无序集合与otherKey对应的无序集合求交集</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(template.opsForSet().intersect(&quot;setTest&quot;,&quot;setTest2&quot;));
</code></pre><p>结果：[aaa, ccc]</p>
<pre><code>[aaa]
[aaa]
</code></pre><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="keyword">Set</span>&lt;V&gt; intersect(K <span class="comment">key, Collection&lt;K&gt; otherKeys)</span>;** </span><br><span class="line">  </span><br><span class="line">  key对应的无序集合与多个otherKey对应的无序集合求交集</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(template.opsForSet().members(&quot;setTest3&quot;));
List&lt;String&gt; strlist = new ArrayList&lt;String&gt;();
strlist.add(&quot;setTest2&quot;);
strlist.add(&quot;setTest3&quot;);
System.out.println(template.opsForSet().intersect(&quot;setTest&quot;,strlist));
</code></pre><p>结果：[aaa, ccc]</p>
<pre><code>[aaa]
[ccc, aaa]
[aaa]
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long intersectAndStore(<span class="keyword">K</span> key, <span class="keyword">K</span> otherKey, <span class="keyword">K</span> destKey);**</span><br><span class="line">  </span><br><span class="line">  key无序集合与otherkey无序集合的交集存储到destKey无序集合中</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(template.opsForSet().intersectAndStore(&quot;setTest&quot;,&quot;setTest2&quot;,&quot;destKey1&quot;));
System.out.println(template.opsForSet().members(&quot;destKey1&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code> setTest2:[ccc, aaa]
 2
[aaa, ccc]    
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long intersectAndStore(<span class="keyword">K</span> key, Collection&lt;<span class="keyword">K</span>&gt; otherKeys, <span class="keyword">K</span> destKey);**</span><br><span class="line">  </span><br><span class="line">  key对应的无序集合与多个otherKey对应的无序集合求交集存储到destKey无序集合中</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));
List&lt;String&gt; strlist = new ArrayList&lt;String&gt;();
    strlist.add(&quot;setTest2&quot;);
    strlist.add(&quot;setTest3&quot;);
System.out.println(template.opsForSet().intersectAndStore(&quot;setTest&quot;,strlist,&quot;destKey2&quot;));
System.out.println(template.opsForSet().members(&quot;destKey2&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
setTest3:[ccc, aaa]
2
  [aaa, ccc]
</code></pre><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;V&gt; <span class="class"><span class="keyword">union</span>(<span class="title">K</span> <span class="title">key</span>, <span class="title">K</span> <span class="title">otherKey</span>);</span>**</span><br><span class="line"></span><br><span class="line">  key无序集合与otherKey无序集合的并集</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(template.opsForSet().union(&quot;setTest&quot;,&quot;setTest2&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
[ccc, aaa, ddd, bbb]
</code></pre><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;V&gt; <span class="class"><span class="keyword">union</span>(<span class="title">K</span> <span class="title">key</span>, <span class="title">Collection</span>&lt;<span class="title">K</span>&gt; <span class="title">otherKeys</span>);</span>**</span><br><span class="line">  </span><br><span class="line">  key无序集合与多个otherKey无序集合的并集</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));
List&lt;String&gt; strlist = new ArrayList&lt;String&gt;();
   strlist.add(&quot;setTest2&quot;);
   strlist.add(&quot;setTest3&quot;);
System.out.println(template.opsForSet().union(&quot;setTest&quot;,strlist));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
setTest3:[xxx, ccc, aaa]
[ddd, xxx, bbb, aaa, ccc]
</code></pre> <figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long unionAndStore(<span class="keyword">K</span> key, <span class="keyword">K</span> otherKey, <span class="keyword">K</span> destKey);** </span><br><span class="line"></span><br><span class="line">  key无序集合与otherkey无序集合的并集存储到destKey无序集合中</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(template.opsForSet().unionAndStore(&quot;setTest&quot;,&quot;setTest2&quot;,&quot;unionAndStoreTest1&quot;));
System.out.println(&quot;unionAndStoreTest1:&quot; + template.opsForSet().members(&quot;unionAndStoreTest1&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
4
unionAndStoreTest1:[ccc, aaa, ddd, bbb]
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long unionAndStore(<span class="keyword">K</span> key, Collection&lt;<span class="keyword">K</span>&gt; otherKeys, <span class="keyword">K</span> destKey);**</span><br><span class="line">  </span><br><span class="line">  key无序集合与多个otherkey无序集合的并集存储到destKey无序集合中</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));
List&lt;String&gt; strlist = new ArrayList&lt;String&gt;();
strlist.add(&quot;setTest2&quot;);
strlist.add(&quot;setTest3&quot;);
System.out.println(template.opsForSet().unionAndStore(&quot;setTest&quot;,strlist,&quot;unionAndStoreTest2&quot;));
System.out.println(&quot;unionAndStoreTest2:&quot; + template.opsForSet().members(&quot;unionAndStoreTest2&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
setTest3:[xxx, ccc, aaa]
5
unionAndStoreTest2:[ddd, xxx, bbb, aaa, ccc]
</code></pre><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">- **<span class="keyword">Set</span>&lt;V&gt; difference(K <span class="comment">key, K otherKey)</span>;**</span><br><span class="line"> </span><br><span class="line">  key无序集合与otherKey无序集合的差集</span><br></pre></td></tr></table></figure>
<p> 使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(template.opsForSet().difference(&quot;setTest&quot;,&quot;setTest2&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
[bbb, ddd] 
</code></pre><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="keyword">Set</span>&lt;V&gt; difference(K <span class="comment">key, Collection&lt;K&gt; otherKeys)</span>;**</span><br><span class="line">  </span><br><span class="line">  key无序集合与多个otherKey无序集合的差集</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));
List&lt;String&gt; strlist = new ArrayList&lt;String&gt;();
   strlist.add(&quot;setTest2&quot;);
   strlist.add(&quot;setTest3&quot;);
System.out.println(template.opsForSet().difference(&quot;setTest&quot;,strlist));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
setTest3:[xxx, ccc, aaa]
[bbb, ddd]
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long differenceAndStore(<span class="keyword">K</span> key, <span class="keyword">K</span> otherKey, <span class="keyword">K</span> destKey);** </span><br><span class="line"></span><br><span class="line">  key无序集合与otherkey无序集合的差集存储到destKey无序集合中</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(template.opsForSet().differenceAndStore(&quot;setTest&quot;,&quot;setTest2&quot;,&quot;differenceAndStore1&quot;));
System.out.println(&quot;differenceAndStore1:&quot; + template.opsForSet().members(&quot;differenceAndStore1&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
2
differenceAndStore1:[bbb, ddd]
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **Long differenceAndStore(<span class="keyword">K</span> key, Collection&lt;<span class="keyword">K</span>&gt; otherKeys, <span class="keyword">K</span> destKey);** </span><br><span class="line"></span><br><span class="line">  key无序集合与多个otherkey无序集合的差集存储到destKey无序集合中</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTest2:&quot; + template.opsForSet().members(&quot;setTest2&quot;));
System.out.println(&quot;setTest3:&quot; + template.opsForSet().members(&quot;setTest3&quot;));
List&lt;String&gt; strlist = new ArrayList&lt;String&gt;();
   strlist.add(&quot;setTest2&quot;);
   strlist.add(&quot;setTest3&quot;);
System.out.println(template.opsForSet().differenceAndStore(&quot;setTest&quot;,strlist,&quot;differenceAndStore2&quot;));
System.out.println(&quot;differenceAndStore2:&quot; + template.opsForSet().members(&quot;differenceAndStore2&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTest2:[ccc, aaa]
setTest3:[xxx, ccc, aaa]
2
differenceAndStore2:[bbb, ddd]
</code></pre><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **<span class="keyword">Set</span>&lt;V&gt; members(K <span class="comment">key)</span>;**</span><br><span class="line">  </span><br><span class="line">  返回集合中的所有成员</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForSet().members(“setTest”));<br>结果：[ddd, bbb, aaa, ccc]</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  </span></span><br><span class="line"><span class="bullet">- </span>*<span class="strong">*V randomMember(K key);*</span><span class="strong">*</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">  随机获取key无序集合中的一个元素</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“setTest:” + template.opsForSet().members(“setTest”));</p>
<pre><code>System.out.println(&quot;setTestrandomMember:&quot; + template.opsForSet().randomMember(&quot;setTest&quot;));
System.out.println(&quot;setTestrandomMember:&quot; + template.opsForSet().randomMember(&quot;setTest&quot;));
System.out.println(&quot;setTestrandomMember:&quot; + template.opsForSet().randomMember(&quot;setTest&quot;));
System.out.println(&quot;setTestrandomMember:&quot; + template.opsForSet().randomMember(&quot;setTest&quot;));
</code></pre><p>结果：setTest:[ddd, bbb, aaa, ccc]</p>
<pre><code>setTestrandomMember:aaa
setTestrandomMember:bbb
setTestrandomMember:aaa
setTestrandomMember:ddd
</code></pre><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;V&gt; <span class="keyword">distinctRandomMembers(K </span>key, long <span class="built_in">count</span>)<span class="comment">;** </span></span><br><span class="line">  </span><br><span class="line">  获取多个key无序集合中的元素（去重），<span class="built_in">count</span>表示个数</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“randomMembers:” + template.opsForSet().distinctRandomMembers(“setTest”,5));<br>结果：randomMembers:[aaa, bbb, ddd, ccc]</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **List&lt;V&gt; randomMembers(K <span class="built_in">key</span>, long <span class="built_in">count</span>);**</span><br><span class="line">  </span><br><span class="line">  获取多个<span class="built_in">key</span>无序集合中的元素，<span class="built_in">count</span>表示个数</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(“randomMembers:” + template.opsForSet().randomMembers(“setTest”,5));<br>结果：randomMembers:[ccc, ddd, ddd, ddd, aaa]</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Cursor&lt;V&gt; <span class="keyword">scan(K </span>key, <span class="keyword">ScanOptions </span>options)<span class="comment">;**</span></span><br><span class="line">  </span><br><span class="line">  遍历set</span><br></pre></td></tr></table></figure>
<p>使用： Cursor<object> curosr = template.opsForSet().scan(“setTest”, ScanOptions.NONE);</object></p>
<pre><code>while(curosr.hasNext()){
   System.out.println(curosr.next());
}
</code></pre><p>结果：ddd</p>
<pre><code>bbb
  aaa
ccc
</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="comment">## Redis的ZSet数据结构 </span></span><br><span class="line"> </span><br><span class="line"> Redis 有序集合和无序集合一样也是string类型元素的集合,且不允许重复的成员。</span><br><span class="line">不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。</span><br><span class="line">有序集合的成员是唯一的,但分数(score)却可以重复。</span><br><span class="line">public<span class="built_in"> interface </span>ZSetOperations&lt;K,V&gt;</span><br><span class="line">ZSetOperations提供了一系列方法对有序集合进行操作：</span><br><span class="line"></span><br><span class="line">- *<span class="number">*B</span>oolean <span class="builtin-name">add</span>(K key, V value, double score);**</span><br><span class="line"></span><br><span class="line">  新增一个有序集合，存在的话为<span class="literal">false</span>，不存在的话为<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().add(“zset1”,”zset-1”,1.0));<br>结果：true</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">-<span class="ruby"> **Long add(K key, Set&lt;TypedTuple&lt;V<span class="meta">&gt;&gt; </span>tuples);**</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  新增一个有序集合</span></span><br></pre></td></tr></table></figure>
<p>使用：ZSetOperations.TypedTuple<object> objectTypedTuple1 = new DefaultTypedTuple<object>(“zset-5”,9.6);</object></object></p>
<pre><code>ZSetOperations.TypedTuple&lt;Object&gt; objectTypedTuple2 = new DefaultTypedTuple&lt;Object&gt;(&quot;zset-6&quot;,9.9);
Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples = new HashSet&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt;();
    tuples.add(objectTypedTuple1);
    tuples.add(objectTypedTuple2);
System.out.println(template.opsForZSet().add(&quot;zset1&quot;,tuples));
System.out.println(template.opsForZSet().range(&quot;zset1&quot;,0,-1));
</code></pre><p>结果：[zset-1, zset-2, zset-3, zset-4, zset-5, zset-6]</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long <span class="built_in">remove</span>(K <span class="built_in">key</span>, Object... <span class="built_in">values</span>);** </span><br><span class="line">  </span><br><span class="line">  从有序集合中移除一个或者多个元素</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().range(“zset1”,0,-1));</p>
<pre><code>System.out.println(template.opsForZSet().remove(&quot;zset1&quot;,&quot;zset-6&quot;));
System.out.println(template.opsForZSet().range(&quot;zset1&quot;,0,-1));
</code></pre><p>结果：[zset-1, zset-2, zset-3, zset-4, zset-5, zset-6]</p>
<pre><code>1
  [zset-1, zset-2, zset-3, zset-4, zset-5]
</code></pre><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="function">Double <span class="title">incrementScore</span>(<span class="params">K key, V <span class="keyword">value</span>, <span class="keyword">double</span> delta</span>)</span>;**  </span><br><span class="line">  </span><br><span class="line">  增加元素的score值，并返回增加后的值</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().incrementScore(“zset1”,”zset-1”,1.1));  //原为1.1<br>结果：2.2</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="built_in">Long</span> rank(K <span class="keyword">key</span>, <span class="built_in">Object</span> o);**</span><br><span class="line">  </span><br><span class="line">  返回有序集中指定成员的排名，其中有序集成员按分数值递增(从小到大)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().range(“zset1”,0,-1));</p>
<pre><code>System.out.println(template.opsForZSet().rank(&quot;zset1&quot;,&quot;zset-2&quot;));
</code></pre><p>结果：[zset-2, zset-1, zset-3, zset-4, zset-5]</p>
<pre><code>0   //表明排名第一
</code></pre><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="built_in">Long</span> reverseRank(K <span class="keyword">key</span>, <span class="built_in">Object</span> o);** </span><br><span class="line">  </span><br><span class="line">  返回有序集中指定成员的排名，其中有序集成员按分数值递减(从大到小)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().range(“zset1”,0,-1));</p>
<pre><code>System.out.println(template.opsForZSet().reverseRank(&quot;zset1&quot;,&quot;zset-2&quot;));
</code></pre><p>结果：[zset-2, zset-1, zset-3, zset-4, zset-5]</p>
<pre><code>4 //递减之后排到第五位去了  
</code></pre><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="keyword">Set</span>&lt;V&gt; range(K <span class="keyword">key</span>, <span class="built_in">long</span> start, <span class="built_in">long</span> <span class="keyword">end</span>);**</span><br><span class="line">  </span><br><span class="line">  通过索引区间返回有序集合成指定区间内的成员，其中有序集成员按分数值递增(从小到大)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().range(“zset1”,0,-1));<br>结果：[zset-2, zset-1, zset-3, zset-4, zset-5]</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="keyword">Set</span>&lt;TypedTuple&lt;V&gt;&gt; rangeWithScores(K <span class="keyword">key</span>, <span class="built_in">long</span> start, <span class="built_in">long</span> <span class="keyword">end</span>);**</span><br><span class="line">  </span><br><span class="line">  通过索引区间返回有序集合成指定区间内的成员对象，其中有序集成员按分数值递增(从小到大)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用：Set<zsetoperations.typedtuple<object>&gt; tuples = template.opsForZSet().rangeWithScores(“zset1”,0,-1);</zsetoperations.typedtuple<object></p>
<pre><code>Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = tuples.iterator();
while (iterator.hasNext())
{
    ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next();
    System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());
}
</code></pre><p>结果：value:zset-2score:1.2</p>
<pre><code>value:zset-1score:2.2
value:zset-3score:2.3
   value:zset-4score:6.6
 value:zset-5score:9.6
</code></pre><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **Set&lt;V&gt; rangeByScore(K <span class="built_in">key</span>, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>);**</span><br><span class="line"></span><br><span class="line">  通过分数返回有序集合指定区间内的成员，其中有序集成员按分数值递增(从小到大)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().rangeByScore(“zset1”,0,5));<br>结果：[zset-2, zset-1, zset-3]</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;TypedTuple&lt;V&gt;&gt; rangeByScoreWithScores(K <span class="built_in">key</span>, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>);**</span><br><span class="line"></span><br><span class="line">  通过分数返回有序集合指定区间内的成员对象，其中有序集成员按分数值递增(从小到大)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用：Set<zsetoperations.typedtuple<object>&gt; tuples = template.opsForZSet().rangeByScoreWithScores(“zset1”,0,5);</zsetoperations.typedtuple<object></p>
<pre><code>Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = tuples.iterator();
while (iterator.hasNext())
{
    ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next();
    System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());
}
</code></pre><p>结果：value:zset-2score:1.2</p>
<pre><code>value:zset-1score:2.2
value:zset-3score:2.3
</code></pre><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;V&gt; rangeByScore(K <span class="built_in">key</span>, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>, <span class="keyword">long</span> offset, <span class="keyword">long</span> count);**</span><br><span class="line">   </span><br><span class="line">  通过分数返回有序集合指定区间内的成员，并在索引范围内，其中有序集成员按分数值递增(从小到大)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用： System.out.println(template.opsForZSet().rangeByScore(“zset1”,0,5));<br>  System.out.println(template.opsForZSet().rangeByScore(“zset1”,0,5,1,2));<br>结果：[zset-2, zset-1, zset-3]</p>
<pre><code>[zset-1, zset-3]
</code></pre><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;TypedTuple&lt;V&gt;&gt; rangeByScoreWithScores(K <span class="built_in">key</span>, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>, <span class="keyword">long</span> offset, <span class="keyword">long</span> count);**</span><br><span class="line"></span><br><span class="line">  通过分数返回有序集合指定区间内的成员对象，并在索引范围内，其中有序集成员按分数值递增(从小到大)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用：Set<zsetoperations.typedtuple<object>&gt; tuples = template.opsForZSet().rangeByScoreWithScores(“zset1”,0,5,1,2);</zsetoperations.typedtuple<object></p>
<pre><code>Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = tuples.iterator();
while (iterator.hasNext())
{
    ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next();
    System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());
}
</code></pre><p>结果：value:zset-1score:2.2</p>
<pre><code>value:zset-3score:2.3
</code></pre><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;V&gt; reverseRange(K <span class="type">key</span>, long start, long end);**</span><br><span class="line">  </span><br><span class="line">  通过索引区间返回有序集合成指定区间内的成员，其中有序集成员按分数值递减(从大到小)顺序排列</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  ```  </span><br><span class="line">  使用：System.out.println(template.opsForZSet().reverseRange(<span class="string">"zset1"</span>,<span class="number">0</span>,<span class="number">-1</span>));</span><br><span class="line">  结果：[zset<span class="number">-5</span>, zset<span class="number">-4</span>, zset<span class="number">-3</span>, zset<span class="number">-1</span>, zset<span class="number">-2</span>]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>Set<typedtuple<v>&gt; reverseRangeWithScores(K key, long start, long end);</typedtuple<v></strong></p>
<p>通过索引区间返回有序集合成指定区间内的成员对象，其中有序集成员按分数值递减(从大到小)顺序排列</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">使用：Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples = template.opsForZSet().reverseRangeWithScores(<span class="string">"zset1"</span>,<span class="number">0</span>,-<span class="number">1</span>);</span><br><span class="line">      Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = tuples.iterator();</span><br><span class="line">      <span class="keyword">while</span> (iterator.hasNext())</span><br><span class="line">      &#123;</span><br><span class="line">          ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next();</span><br><span class="line">          System.<span class="keyword">out</span>.println(<span class="string">"value:"</span> + typedTuple.getValue() + <span class="string">"score:"</span> + typedTuple.getScore());</span><br><span class="line">      &#125;</span><br><span class="line">结果：<span class="keyword">value</span>:zset-<span class="number">5</span>score:<span class="number">9.6</span></span><br><span class="line"> <span class="keyword">value</span>:zset-<span class="number">4</span>score:<span class="number">6.6</span></span><br><span class="line"> <span class="keyword">value</span>:zset-<span class="number">3</span>score:<span class="number">2.3</span></span><br><span class="line"> <span class="keyword">value</span>:zset-<span class="number">1</span>score:<span class="number">2.2</span></span><br><span class="line"> <span class="keyword">value</span>:zset-<span class="number">2</span>score:<span class="number">1.2</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>Set<v> reverseRangeByScore(K key, double min, double max);</v></strong></p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  使用：与rangeByScore调用方法一样，其中有序集成员按分数值递减(从大到小)顺序排列</span><br><span class="line">  ```  </span><br><span class="line">  </span><br><span class="line">- **Set&lt;TypedTuple&lt;V&gt;&gt; reverseRangeByScoreWithScores(K <span class="built_in">key</span>, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>);**</span><br></pre></td></tr></table></figure>
<p>使用：与rangeByScoreWithScores调用方法一样，其中有序集成员按分数值递减(从大到小)顺序排列</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">- **Set&lt;V&gt; reverseRangeByScore(K <span class="built_in">key</span>, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>, <span class="keyword">long</span> offset, <span class="keyword">long</span> count);**</span><br></pre></td></tr></table></figure>
<p>使用：与rangeByScore调用方法一样，其中有序集成员按分数值递减(从大到小)顺序排列</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Set&lt;TypedTuple&lt;V&gt;&gt; reverseRangeByScoreWithScores(K <span class="built_in">key</span>, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>, <span class="keyword">long</span> offset, <span class="keyword">long</span> count);**</span><br></pre></td></tr></table></figure>
<p>使用：与rangeByScoreWithScores调用方法一样，其中有序集成员按分数值递减(从大到小)顺序排列</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">- **Long <span class="built_in">count</span>(K key, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>);**  </span><br><span class="line">  </span><br><span class="line">  通过分数返回有序集合指定区间内的成员个数</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().rangeByScore(“zset1”,0,5));</p>
<pre><code>System.out.println(template.opsForZSet().count(&quot;zset1&quot;,0,5));
</code></pre><p>结果：[zset-2, zset-1, zset-3]<br>3</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  </span></span><br><span class="line"><span class="bullet">- </span>*<span class="strong">*Long size(K key);*</span><span class="strong">*</span></span><br><span class="line"><span class="strong">  </span></span><br><span class="line"><span class="strong">  获取有序集合的成员数，内部调用的就是zCard方法</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().size(“zset1”));<br>结果：6</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">  </span></span><br><span class="line"><span class="bullet">- </span>*<span class="strong">*Long zCard(K key);*</span>* </span><br><span class="line"><span class="code">  </span></span><br><span class="line"><span class="code">  获取有序集合的成员数</span></span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().zCard(“zset1”));<br>结果：6</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="built_in">Double</span> score(K <span class="keyword">key</span>, <span class="built_in">Object</span> o);**  </span><br><span class="line">  </span><br><span class="line">  获取指定成员的score值</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().score(“zset1”,”zset-1”));<br>结果：2.2</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **<span class="built_in">Long</span> removeRange(K <span class="keyword">key</span>, <span class="built_in">long</span> start, <span class="built_in">long</span> <span class="keyword">end</span>);**</span><br><span class="line">  </span><br><span class="line">  移除指定索引位置的成员，其中有序集成员按分数值递增(从小到大)顺序排列</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().range(“zset2”,0,-1));</p>
<pre><code>System.out.println(template.opsForZSet().removeRange(&quot;zset2&quot;,1,2));
System.out.println(template.opsForZSet().range(&quot;zset2&quot;,0,-1));
</code></pre><p>结果：[zset-1, zset-2, zset-3, zset-4]</p>
<pre><code>2
[zset-1, zset-4]
</code></pre><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long removeRangeByScore(K <span class="built_in">key</span>, <span class="keyword">double</span> <span class="built_in">min</span>, <span class="keyword">double</span> <span class="built_in">max</span>);**</span><br><span class="line">  </span><br><span class="line">  根据指定的score值得范围来移除成员</span><br></pre></td></tr></table></figure>
<p>使用：//System.out.println(template.opsForZSet().add(“zset2”,”zset-1”,1.1));</p>
<pre><code>//System.out.println(template.opsForZSet().add(&quot;zset2&quot;,&quot;zset-2&quot;,1.2));
//System.out.println(template.opsForZSet().add(&quot;zset2&quot;,&quot;zset-3&quot;,2.3));
//System.out.println(template.opsForZSet().add(&quot;zset2&quot;,&quot;zset-4&quot;,6.6));
System.out.println(template.opsForZSet().range(&quot;zset2&quot;,0,-1));
System.out.println(template.opsForZSet().removeRangeByScore(&quot;zset2&quot;,2,3));
System.out.println(template.opsForZSet().range(&quot;zset2&quot;,0,-1));
</code></pre><p>结果：[zset-1, zset-2, zset-3,zset-4]</p>
<pre><code>    1
[zset-1, zset-2, zset-4]
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **Long unionAndStore(<span class="keyword">K</span> key, <span class="keyword">K</span> otherKey, <span class="keyword">K</span> destKey);** </span><br><span class="line">  </span><br><span class="line">  计算给定的一个有序集的并集，并存储在新的 destKey中，key相同的话会把score值相加</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().add(“zzset1”,”zset-1”,1.0));</p>
<pre><code>System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-2&quot;,2.0));
System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-3&quot;,3.0));
System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-4&quot;,6.0));

System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-1&quot;,1.0));
System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-2&quot;,2.0));
System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-3&quot;,3.0));
System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-4&quot;,6.0));
System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-5&quot;,7.0));
System.out.println(template.opsForZSet().unionAndStore(&quot;zzset1&quot;,&quot;zzset2&quot;,&quot;destZset11&quot;));

Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples = template.opsForZSet().rangeWithScores(&quot;destZset11&quot;,0,-1);
Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = tuples.iterator();
while (iterator.hasNext())
{
    ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next();
    System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());
}
</code></pre><p>结果：value:zset-1score:2.0</p>
<pre><code>value:zset-2score:4.0
value:zset-3score:6.0
value:zset-5score:7.0
value:zset-4score:12.0
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long unionAndStore(<span class="keyword">K</span> key, Collection&lt;<span class="keyword">K</span>&gt; otherKeys, <span class="keyword">K</span> destKey);**</span><br><span class="line">  </span><br><span class="line">  计算给定的多个有序集的并集，并存储在新的 destKey中</span><br></pre></td></tr></table></figure>
<p>使用：//System.out.println(template.opsForZSet().add(“zzset1”,”zset-1”,1.0));</p>
<pre><code>//System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-2&quot;,2.0));
//System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-3&quot;,3.0));
//System.out.println(template.opsForZSet().add(&quot;zzset1&quot;,&quot;zset-4&quot;,6.0));
//
//System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-1&quot;,1.0));
//System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-2&quot;,2.0));
//System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-3&quot;,3.0));
//System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-4&quot;,6.0));
//System.out.println(template.opsForZSet().add(&quot;zzset2&quot;,&quot;zset-5&quot;,7.0));

System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-1&quot;,1.0));
System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-2&quot;,2.0));
System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-3&quot;,3.0));
System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-4&quot;,6.0));
System.out.println(template.opsForZSet().add(&quot;zzset3&quot;,&quot;zset-5&quot;,7.0));

List&lt;String&gt; stringList = new ArrayList&lt;String&gt;();
stringList.add(&quot;zzset2&quot;);
stringList.add(&quot;zzset3&quot;);
System.out.println(template.opsForZSet().unionAndStore(&quot;zzset1&quot;,stringList,&quot;destZset22&quot;));

Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples = template.opsForZSet().rangeWithScores(&quot;destZset22&quot;,0,-1);
Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = tuples.iterator();
while (iterator.hasNext())
{
    ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next();
    System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());
}
</code></pre><p>结果：value:zset-1score:3.0</p>
<pre><code>value:zset-2score:6.0
value:zset-3score:9.0
value:zset-5score:14.0
value:zset-4score:18.0
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  </span><br><span class="line">- **Long intersectAndStore(<span class="keyword">K</span> key, <span class="keyword">K</span> otherKey, <span class="keyword">K</span> destKey);**</span><br><span class="line">  </span><br><span class="line">  计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</span><br></pre></td></tr></table></figure>
<p>使用：System.out.println(template.opsForZSet().intersectAndStore(“zzset1”,”zzset2”,”destZset33”));</p>
<pre><code>Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples = template.opsForZSet().rangeWithScores(&quot;destZset33&quot;,0,-1);
Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = tuples.iterator();
while (iterator.hasNext())
{
    ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next();
    System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());
}
</code></pre><p>结果：value:zset-1score:2.0</p>
<pre><code>value:zset-2score:4.0
value:zset-3score:6.0
value:zset-4score:12.0
</code></pre><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- **Long intersectAndStore(<span class="keyword">K</span> key, Collection&lt;<span class="keyword">K</span>&gt; otherKeys, <span class="keyword">K</span> destKey);**  </span><br><span class="line">  </span><br><span class="line">  计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</span><br></pre></td></tr></table></figure>
<p>使用：List<string> stringList = new ArrayList<string>();</string></string></p>
<pre><code>stringList.add(&quot;zzset2&quot;);
stringList.add(&quot;zzset3&quot;);
System.out.println(template.opsForZSet().intersectAndStore(&quot;zzset1&quot;,stringList,&quot;destZset44&quot;));

Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; tuples = template.opsForZSet().rangeWithScores(&quot;destZset44&quot;,0,-1);
Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = tuples.iterator();
while (iterator.hasNext())
{
    ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next();
    System.out.println(&quot;value:&quot; + typedTuple.getValue() + &quot;score:&quot; + typedTuple.getScore());
}
</code></pre><p>结果：value:zset-1score:3.0</p>
<pre><code>value:zset-2score:6.0
value:zset-3score:9.0
value:zset-4score:18.0
</code></pre><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">-<span class="ruby"> **Cursor&lt;TypedTuple&lt;V<span class="meta">&gt;&gt; </span>scan(K key, ScanOptions options);** </span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  遍历zset</span></span><br></pre></td></tr></table></figure>
<p>使用： Cursor<zsetoperations.typedtuple<object>&gt; cursor = template.opsForZSet().scan(“zzset1”, ScanOptions.NONE);</zsetoperations.typedtuple<object></p>
<pre><code>while (cursor.hasNext()){
    ZSetOperations.TypedTuple&lt;Object&gt; item = cursor.next();
    System.out.println(item.getValue() + &quot;:&quot; + item.getScore());
}
</code></pre><p>结果：zset-1:1.0</p>
<pre><code>zset-2:2.0
zset-3:3.0
zset-4:6.0
</code></pre><p>```</p>
<blockquote>
<p>注：TimeUnit是java.util.concurrent包下面的一个类，表示给定单元粒度的时间段<br>常用的颗粒度</p>
<p>TimeUnit.DAYS //天</p>
<p>TimeUnit.HOURS //小时</p>
<p>TimeUnit.MINUTES //分钟</p>
<p>TimeUnit.SECONDS //秒</p>
<p>TimeUnit.MILLISECONDS //毫秒</p>
</blockquote>
</li>
</ul>
<p><strong>本文转自简书：<a href="https://www.jianshu.com/p/7bf5dc61ca06" target="_blank" rel="noopener">如何使用RedisTemplate访问Redis数据结构</a></strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">分享到：</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];

</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://litxiaosa.me/2018/01/05/如何使用RedisTemplate访问Redis数据结构/#comments" id="sourceId::2018/01/05/如何使用RedisTemplate访问Redis数据结构/" class="article-comment-link cy_cmt_count">评论</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2017/12/14/SpringBoot（十）之 RabbitMQ/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">SpringBoot（十）之 RabbitMQ</div>
        </a>
    
</nav>


    
</article>


    
    
        <section id="comments">
    <div id="SOHUCS" sid="2018/01/05/如何使用RedisTemplate访问Redis数据结构/"></div>
</section>
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">公告</h3>
    </div>


    
        
    <div class="widget-wrap">
        <h3 class="widget-title">文章分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot系列/">SpringBoot系列</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/solr/">solr</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/不知所云/">不知所云</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习Git/">学习Git</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/环境变量/">环境变量</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编码规范插件/">编码规范插件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">6</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Git/" style="font-size: 17.5px;">Git</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SpringBoot/" style="font-size: 20px;">SpringBoot</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/solr/" style="font-size: 10px;">solr</a> <a href="/tags/不知所云/" style="font-size: 10px;">不知所云</a> <a href="/tags/不知所云，摘抄/" style="font-size: 12.5px;">不知所云，摘抄</a> <a href="/tags/环境变量/" style="font-size: 10px;">环境变量</a> <a href="/tags/编码规范插件/" style="font-size: 10px;">编码规范插件</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">友情链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://www.520code.net/">指尖代码</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2018 潇洒<br>
             <a href="http://www.miitbeian.gov.cn/state/outPortal/loginPortal.action;jsessionid=jXXzJfoHmRVnh4Wtlin6joVW_3P2wkKCL0IputNLM-40wznfPW8Z!-179429638" target="_blank">浙ICP备17031501号-1</a>
        </div>
    </div>

	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

	<span id="busuanzi_container_site_pv">
	    本站总访问量<span id="busuanzi_value_site_pv"></span>次
	</span>
	| 
	<span id="busuanzi_container_site_uv">
  		本站访客数<span id="busuanzi_value_site_uv"></span>人次
	</span>

</footer>

        
    
    <script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cyt89XC6v"></script>
    <script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js" ></script>
    <script type="text/javascript">
    window.changyan.api.config({
    appid: 'cyt89XC6v',
    conf: '05f02c05c1850e9dc85891de397ebfe0'
    });
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>